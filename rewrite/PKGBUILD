# Contributors:
#   henning mueller <henning@orgizm.net>

pkgname=linux-pax-flags
pkgdesc='Deactivates PaX flags for several binaries to work with PaX enabled kernels.'
pkgver=2.0.0
pkgrel=1
arch=(any)
url='https://aur.archlinux.org/packages.php?ID=55491'
license=(GPL3)
depends=(ruby paxctl)
source=(
  $pkgname.rb
  simple.conf
  polkit.conf
)
sha256sums=(
  06d5f59e91600980e2288b79d8cc08deaa034bdb82c32c2d2ba80fc01efd7bc7
  67420dddad9e12507c5f9b227f1f5a6db360c9f765322163661460fbc9e6f91b
  9bca76b5b10de3e501487ed90b3cd95bf65b7233a430e7db31d548eb6926283f
)

build() {
  return 0
}

package() {
  install -D -m755 $srcdir/$pkgname.rb $pkgdir/usr/bin/$pkgname

  for config in $srcdir/*.conf; do
    install -D -m600 $config $pkgdir/usr/share/$pkgname/$(basename $config)
  done

  mkdir -p $pkgdir/etc/pax-flags
}
